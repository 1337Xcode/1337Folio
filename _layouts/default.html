<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!--
    TEMPLATE NOTES:
    - This theme is set up to use values from `_config.yml` (site.title, site.author, social usernames).
    - For a quick template-friendly edit you can change the visible name/email defaults below in this file
      without touching `_config.yml` (they are exposed as `window.SITE_OWNER` and `window.SITE_EMAIL`).
    - Recommended quick edits: change the default strings passed to `default` filters in the script below.
  -->
  <title>{% if page.title %}{{ page.title | escape }} | {{ site.title | escape }}{% else %}{{ site.title | escape }}{% endif %}</title>
  <script src="{{ '/assets/js/anims/tab.js' | relative_url }}"></script>
  <meta name="description" content="{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}{% else %}{{ site.description }}{% endif %}">
  <!-- Inter font for multilingual support in intro -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

  <!-- Lucide Icons for UI elements -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js" defer></script>
  
  <!-- KaTeX for Math rendering -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>

  <!-- Preload critical CSS -->
  <link rel="preload" href="{{ '/assets/css/main.css' | relative_url }}" as="style">
  <link rel="preload" href="{{ '/assets/css/mobile.css' | relative_url }}" as="style">
  <link rel="preload" href="{{ '/assets/css/components/scrollbar.css' | relative_url }}" as="style">
  <link rel="preload" href="{{ '/assets/css/components/code.css' | relative_url }}" as="style">

  <!-- Main CSS -->
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
  <!-- Mobile CSS -->
  <link rel="stylesheet" href="{{ '/assets/css/mobile.css' | relative_url }}">
  <!-- Code Block Styling CSS -->
  <link rel="stylesheet" href="{{ '/assets/css/components/code.css' | relative_url }}">
  <link rel="stylesheet" href="{{ '/assets/css/pages/projects.css' | relative_url }}">
  {% if page.url contains '/pics' %}
  <link rel="stylesheet" href="{{ '/assets/css/pages/pics.css' | relative_url }}">
  {% endif %}
  {% if page.url contains '/contact' %}
  <link rel="stylesheet" href="{{ '/assets/css/pages/contact.css' | relative_url }}">
  {% endif %}
  <link rel="stylesheet" href="{{ '/assets/css/components/pfp.css' | relative_url }}">
  {% seo %}
  {% feed_meta %}
  <link rel="icon" type="image/png" href="{{ '/assets/images/icons/xcode.png' | relative_url }}">

  <script>
    // Set theme as early as possible to prevent flicker
    (function() {
      try {
        var theme = localStorage.getItem('theme');
        if (theme) {
          document.documentElement.setAttribute('data-theme', theme);
        }
      } catch(e) { // Fail silently
      }
    })();
  </script>
  <!-- expose easy-to-edit client-side defaults (edit text here for quick templating) -->
  <script>
    // These values fall back to simple strings so users can edit this file directly
    // or override via `_config.yml` (site.author.name) if they prefer.
    window.SITE_OWNER = "{{ site.author.name | default: 'Your Name' }}";
    window.SITE_EMAIL = "{{ site.author.email | default: 'your-email@example.com' }}";
  </script>
</head>
<body class="pre-intro">
  <header class="header">
    <div class="container">
      <nav class="nav">
        <a href="{{ '/' | relative_url }}" class="logo">{{ site.title }}</a>
        
        <ul class="nav-links">
          <li><a href="{{ '/blog/' | relative_url }}" data-page="blog">Blog</a></li>
          <li><a href="{{ '/projects/' | relative_url }}" data-page="projects">Projects</a></li>
          <li><a href="{{ '/pics/' | relative_url }}" data-page="pics">Gallery</a></li>
          <li><a href="{{ '/contact/' | relative_url }}" data-page="contact">Contact</a></li>
          <li><a href="{{ '/tags/' | relative_url }}" data-page="tags">Tags</a></li>
        </ul>
        
        <div class="nav-icons">
          <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" title="Menu">
            <span class="hamburger-middle"></span>
            <i data-lucide="menu"></i>
          </button>
          <button class="theme-toggle" onclick="toggleTheme()" title="Toggle Theme">
            <i data-lucide="sun" id="themeIcon"></i>
          </button>
        </div>
      </nav>
    </div>
  </header>

  <!-- Mobile Sidebar Blur Overlay -->
  <div class="mobile-sidebar-overlay" onclick="closeMobileMenu()"></div>
  <!-- Mobile Sidebar Panel -->
  <aside class="mobile-sidebar" id="mobileSidebar">
    <div class="mobile-sidebar-header">
      <button class="mobile-sidebar-close" onclick="closeMobileMenu()" title="Close Menu">
        <i data-lucide="x"></i>
      </button>
    </div>
    <nav class="mobile-sidebar-nav">
      <ul>
        <li>
          <a href="{{ '/blog/' | relative_url }}" data-page="blog" onclick="closeMobileMenu()">
            Blog
          </a>
        </li>
        <li>
          <a href="{{ '/projects/' | relative_url }}" data-page="projects" onclick="closeMobileMenu()">
            Projects
          </a>
        </li>
        <li>
          <a href="{{ '/pics/' | relative_url }}" data-page="pics" onclick="closeMobileMenu()">
            Gallery
          </a>
        </li>
        <li>
          <a href="{{ '/contact/' | relative_url }}" data-page="contact" onclick="closeMobileMenu()">
            Contact
          </a>
        </li>
        <li>
          <a href="{{ '/tags/' | relative_url }}" data-page="tags" onclick="closeMobileMenu()">
            Tags
          </a>
        </li>
        <li>
          <a href="https://github.com/{{ site.github_username }}" target="_blank" rel="noopener" onclick="closeMobileMenu()" class="github-link" title="GitHub Profile">
            <i data-lucide="github"></i>
          </a>
        </li>
        <li>
          <a href="#" onclick="event.preventDefault(); siteManager.toggleTheme(); closeMobileMenu();" title="Toggle Theme" class="mobile-theme-toggle-link">
            <i data-lucide="sun" id="mobileSidebarThemeIcon"></i>
            <span id="mobileSidebarThemeText" style="display:none"></span>
          </a>
        </li>
      </ul>
    </nav>
  </aside>

  <main>
    {{ content }}
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>
        Made with
        <img src="{{ '/assets/images/icons/heart.png' | relative_url }}" alt="heart" class="heart-icon" style="width:1em; height:1em; vertical-align:middle;">
        by
        <a href="https://github.com/1337XCode" target="_blank" rel="noopener noreferrer">1337XCode</a>
      </p>
    </div>
  </footer>

  <!-- Main JavaScript -->
  <script src="{{ '/assets/js/main.js' | relative_url }}" defer></script>
  {% if page.url contains '/contact' %}
  <script src="{{ '/assets/js/pages/contact.js' | relative_url }}" defer></script>
  {% endif %}
  <script src="{{ '/assets/js/anims/pfp.js' | relative_url }}"></script>

  <!-- Initialize Lucide icons and Katex -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      lucide.createIcons();
    renderMathInElement(document.body, {
      delimiters: [
        {left: '$$', right: '$$', display: true},
        {left: '$', right: '$', display: false},
        {left: '\\(', right: '\\)', display: false},
        {left: '\\[', right: '\\]', display: true}
      ],
      throwOnError: false
    });
    });
  </script>
</body>
</html>
